<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>CRUD de Clientes Ajax</title>
</head>
	<script>
		var request;
		var index = 0;
		
		function sendRequest() {
			//Monta a url de requisição para o servidor
			url = "salvaClienteAsync";
			request = new XMLHttpRequest();
			
			//Determina a função para o processamento da requislção
			request.onreadystatechange = processRequest;
			
			//Configura a requisição
			request.open("POST", url, true);
			
			//Prepara os dados a serem enviados
			var nome = document.getElementById("nome").value;
			var email = document.getElementById("email").value;
			var telefone = document.getElementById("telefone").value;
			
			var dados = "Nome: " + nome "&email" + email + "&telefone" + telefone;
			
			//Envia a requisição
			request.send(dados);
		}
		
		function processRequest(){
			//Faz a leitura da resposta recebida
			var response = request.responseText;
			if(request.readyState == 3 && request.status == 20){
				var div = document.getElementById("mensagem");
				var mensagem = response.substring(index);
				div.innerHTML = "";
				div.appendChild(document.createTextNode(mensagem));
				index = response.lenght;
			};
		}
	</script>
<body>
	<table>
		<tr>
			<td>
				<div style="color:green" id="mensagem"></div>
			</td>
		</tr>
	</table>
</body>
</html>